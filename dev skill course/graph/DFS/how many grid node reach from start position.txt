#include <bits/stdc++.h>
#define LIM 1003
using namespace std;

int dr[] = {-1, +1, 0, 0};
int dc[] = {0, 0, -1, +1};

int n,m;
char grid[LIM][LIM];
int vis[LIM][LIM];

bool valid(int r, int c) {
    return r >= 0 && r < n && c >= 0 && c < m;
}

int dfs(int ur, int uc) {
    vis[ur][uc] = 1;
    int cnt = 1;
    for(int i=0; i<4; i++) {
        int vr = ur+dr[i];
        int vc = uc+dc[i];
        if(valid(vr,vc) && grid[vr][vc] != '#') {
            if(!vis[vr][vc]) {
                cnt += dfs(vr,vc);
            }
        }
    }
    return cnt;
}

int main() {
    scanf("%d %d", &n, &m);
    for(int i=0; i<n; i++) {
        scanf("%s", grid[i]);
    }

    int ur, uc;
    for(int i=0; i<n; i++) {
        for(int j=0; j<m; j++) {
            if(grid[i][j] == 'S') {
                ur = i; uc = j;
            }
        }
    }

    memset(vis, 0, sizeof vis);

   cout<<dfs(ur,uc)<<endl;
   for(int i=0; i<n; i++)
   {
       cout<<grid[i]<<endl;
   }





}

/*
10 10
..........
##......#.
#.##...#.#
#...#.##.#
#####.#..#
......#..#
##...#.S.#
#.##..#..#
#...#..#.#
#####...#.
*/